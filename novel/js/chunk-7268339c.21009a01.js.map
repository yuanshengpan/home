{"version":3,"sources":["webpack:///./src/views/Search.vue?5160","webpack:///src/views/Search.vue","webpack:///./src/views/Search.vue?0d6a","webpack:///./src/views/Search.vue","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/views/Search.vue?cd7d","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","getAutoComplete","onSearch","scopedSlots","_u","key","fn","_v","proxy","model","value","callback","$$v","expression","autoCompleteData","length","_l","hotWordsData","item","index","$event","searchList","_s","staticStyle","clearHistory","staticRenderFns","data","arrData","searchHistory","created","storage","getItem","JSON","parse","getHotBooks","methods","$router","go","localStorage","removeItem","$toast","val","trim","indexOf","splice","unshift","pop","setItem","push","loading","message","forbidClick","duration","axios","method","url","component","$","$trim","forcedStringTrimMethod","target","proto","forced","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","stat","keys","it","non","METHOD_NAME","name"],"mappings":"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","file":"js/chunk-7268339c.21009a01.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('van-nav-bar',{staticClass:\"border\",attrs:{\"title\":\"搜索\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('div',{staticClass:\"border\"},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"请输入搜索关键词\"},on:{\"input\":_vm.getAutoComplete,\"search\":_vm.onSearch},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('div',{on:{\"click\":_vm.onSearch}},[_vm._v(\"搜索\")])]},proxy:true}]),model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),(_vm.autoCompleteData.length == 0)?_c('div',[_c('div',{staticClass:\"hot\"},[_c('ul',{staticClass:\"clearfix\"},_vm._l((_vm.hotWordsData.hotWords),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.searchList(item)}}},[_vm._v(_vm._s(item))])}),0)]),_c('div',{staticClass:\"bg\"},[_c('van-cell',{attrs:{\"title\":\"搜索历史\"},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('van-icon',{staticStyle:{\"line-height\":\"inherit\"},attrs:{\"name\":\"delete\"},on:{\"click\":_vm.clearHistory}},[_vm._v(\"删除历史\")])]},proxy:true}],null,false,1400552467)})],1),_c('div',_vm._l((_vm.searchHistory),function(item,index){return _c('van-cell',{key:index,staticClass:\"bg\",attrs:{\"title\":item},on:{\"click\":function($event){return _vm.searchList(item)}}})}),1)]):_c('div',_vm._l((_vm.autoCompleteData),function(item,index){return _c('van-cell',{key:index,staticClass:\"bg\",attrs:{\"title\":item},on:{\"click\":function($event){return _vm.searchList(item)}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search\">\n    <van-nav-bar class=\"border\" title=\"搜索\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\n    <div class=\"border\">\n      <van-search\n        v-model=\"value\"\n        @input=\"getAutoComplete\"\n        show-action\n        placeholder=\"请输入搜索关键词\"\n        @search=\"onSearch\"\n      >\n        <template #action>\n          <div @click=\"onSearch\">搜索</div>\n        </template>\n      </van-search>\n    </div>\n    <div v-if=\"autoCompleteData.length == 0\">\n      <div class=\"hot\">\n        <ul class=\"clearfix\">\n          <li\n            v-for=\"(item,index) in hotWordsData.hotWords\"\n            :key=\"index\"\n            @click=\"searchList(item)\"\n          >{{item}}</li>\n        </ul>\n      </div>\n      <div class=\"bg\">\n        <van-cell title=\"搜索历史\">\n          <!-- 使用 right-icon 插槽来自定义右侧图标 -->\n          <template #right-icon>\n            <van-icon name=\"delete\" @click=\"clearHistory\" style=\"line-height: inherit;\">删除历史</van-icon>\n          </template>\n        </van-cell>\n      </div>\n      <div>\n        <van-cell\n          class=\"bg\"\n          v-for=\"(item,index) in searchHistory\"\n          :key=\"index\"\n          :title=\"item\"\n          @click=\"searchList(item)\"\n        />\n      </div>\n    </div>\n    <div v-else>\n      <van-cell\n        class=\"bg\"\n        v-for=\"(item,index) in autoCompleteData\"\n        :key=\"index\"\n        :title=\"item\"\n        @click=\"searchList(item)\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      value: \"\",\n      arrData: [],\n      index: 0,\n      searchHistory: [],\n      hotWordsData: [],\n      autoCompleteData: []\n    };\n  },\n  created() {\n    let storage = window.localStorage;\n    if (storage.getItem(\"searchHistory\") !== null) {\n      // this.historyLis 为渲染到页面\n      this.searchHistory = JSON.parse(storage.getItem(\"searchHistory\"));\n    }\n    this.getHotBooks();\n  },\n  methods: {\n    //返回\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    //点击搜索历史跳转到相应页面\n    searchList(item) {\n      this.value = item;\n      this.onSearch();\n    },\n    //删除本地存储\n    clearHistory() {\n      localStorage.removeItem(\"searchHistory\");\n      this.searchHistory = [];\n    },\n    //添加搜索记录到本地存储\n    onSearch() {\n      if (this.value == \"\") {\n        this.$toast(\"关键字不能为空\");\n      } else {\n        let val = this.value;\n        val = val.trim(); // 清除空格\n        if (this.searchHistory.length > 0) {\n          // 有数据的话 判断\n          if (this.searchHistory.indexOf(val) !== -1) {\n            // 有相同的，先删除 再添加\n            this.searchHistory.splice(this.searchHistory.indexOf(val), 1);\n            this.searchHistory.unshift(val);\n          } else {\n            // 没有相同的 添加\n            this.searchHistory.unshift(val);\n          }\n        } else {\n          // 没有数据 添加\n          this.searchHistory.unshift(val);\n        }\n        if (this.searchHistory.length > 6) {\n          // 保留六个值\n          this.searchHistory.pop();\n        }\n        localStorage.setItem(\n          \"searchHistory\",\n          JSON.stringify(this.searchHistory)\n        );\n        this.$router.push({ name: \"Classify\", query: { val: this.value } });\n      }\n    },\n    getHotBooks() {\n      //开启加载提示\n      this.$toast.loading({\n        message: \"加载中...\",\n        forbidClick: true,\n        //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\n        duration: 0\n      });\n      this.axios({\n        method: \"GET\",\n        url: \"https://novel.kele8.cn/hot-books\"\n      })\n        .then(result => {\n          this.$toast.clear();\n          \n          if (Object.keys(result.data).length > 0) {\n            this.hotWordsData = result.data;\n          }\n        })\n        .catch(err => {\n          this.$toast.clear();\n          \n        });\n    },\n    getAutoComplete() {\n      //开启加载提示\n      this.$toast.loading({\n        message: \"加载中...\",\n        forbidClick: true,\n        //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\n        duration: 0\n      });\n      this.axios({\n        method: \"GET\",\n        url: \"https://novel.kele8.cn/auto-complete?query=\" + this.value\n      })\n        .then(result => {\n          this.$toast.clear();\n          \n          this.autoCompleteData = result.data.keywords;\n        })\n        .catch(err => {\n          this.$toast.clear();\n          \n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.search {\n  /deep/ .van-icon-delete::before {\n    margin-right: 3px;\n  }\n  .border {\n    margin: 0px 0 10px;\n  }\n  /deep/ .bg:not(:last-child) {\n    border-bottom: 1px solid #ccc;\n  }\n  .hot {\n    padding: 0 5px;\n    margin-bottom: 10px;\n    ul {\n      display: flex;\n      flex-wrap: wrap;\n      li {\n        padding: 8px 10px;\n        border: 1px solid #ccc;\n        margin: 5px;\n        border-radius: 10px;\n        font-size: 16px;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=532d76d2&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=532d76d2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"532d76d2\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=532d76d2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=532d76d2&lang=less&scoped=true&\"","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n"],"sourceRoot":""}