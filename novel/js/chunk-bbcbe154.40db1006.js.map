{"version":3,"sources":["webpack:///./src/views/Catalog.vue?912c","webpack:///src/views/Catalog.vue","webpack:///./src/views/Catalog.vue?d0bf","webpack:///./src/views/Catalog.vue","webpack:///./src/views/Catalog.vue?6263"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","onClickRight","scopedSlots","_u","key","fn","show","proxy","style","height","model","value","callback","$$v","expression","_l","item","index","icon","text","$event","popupClick","loadOptions","isFinished","finishedText","onLoad","$set","staticStyle","length","sort","_v","_s","isSort","class","isIndex","title","listClick","staticRenderFns","data","bookId","popup","listData","allListData","isLoading","loadCount","created","$route","query","getbookChapters","methods","$router","go","push","$toast","loading","message","forbidClick","duration","axios","method","url","id","sortNumber","b","order","a","setTimeout","name","component"],"mappings":"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","file":"js/chunk-bbcbe154.40db1006.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"catalog\"},[_c('div',[_c('van-nav-bar',{staticClass:\"bar\",attrs:{\"title\":\"目录\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft,\"click-right\":_vm.onClickRight},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":_vm.show ? 'cross' : 'ellipsis',\"size\":\"18\"}})]},proxy:true}])}),_c('van-popup',{style:({ height: '171.2px'}),attrs:{\"position\":\"top\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-grid',{attrs:{\"column-num\":3}},_vm._l((_vm.popup),function(item,index){return _c('van-grid-item',{key:index,attrs:{\"icon\":item.icon,\"text\":item.text},on:{\"click\":function($event){return _vm.popupClick(item)}}})}),1)],1)],1),_c('div',{staticClass:\"booklist\"},[_c('van-list',{attrs:{\"finished\":_vm.loadOptions.isFinished,\"finished-text\":_vm.loadOptions.finishedText,\"offset\":50},on:{\"load\":_vm.onLoad},model:{value:(_vm.loadOptions.isLoading),callback:function ($$v) {_vm.$set(_vm.loadOptions, \"isLoading\", $$v)},expression:\"loadOptions.isLoading\"}},[_c('van-cell',{staticClass:\"total\",staticStyle:{\"color\":\"#333730\",\"font-weight\":\"bold\"},attrs:{\"title\":'共'+_vm.length+'章'},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('div',{staticStyle:{\"color\":\"#333730\",\"font-weight\":\"200\"},on:{\"click\":_vm.sort}},[_vm._v(_vm._s(_vm.isSort ? '正序' : '倒序'))])]},proxy:true}])}),_vm._l((_vm.listData),function(item,index){return _c('van-cell',{key:index,class:index == _vm.isIndex ? 'active' : '',attrs:{\"title\":item.title,\"is-link\":\"\"},on:{\"click\":function($event){return _vm.listClick(index,item)}}})})],2)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"catalog\">\n    <div>\n      <van-nav-bar\n        class=\"bar\"\n        title=\"目录\"\n        left-text=\"返回\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n        @click-right=\"onClickRight\"\n      >\n        <template #right>\n          <van-icon :name=\"show ? 'cross' : 'ellipsis'\" size=\"18\" />\n        </template>\n      </van-nav-bar>\n      <van-popup v-model=\"show\" position=\"top\" :style=\"{ height: '171.2px'}\">\n        <van-grid :column-num=\"3\">\n          <van-grid-item\n            v-for=\"(item,index) in popup\"\n            :key=\"index\"\n            :icon=\"item.icon\"\n            :text=\"item.text\"\n            @click=\"popupClick(item)\"\n          />\n        </van-grid>\n      </van-popup>\n    </div>\n    <div class=\"booklist\">\n      <van-list\n        v-model=\"loadOptions.isLoading\"\n        :finished=\"loadOptions.isFinished\"\n        :finished-text=\"loadOptions.finishedText\"\n        @load=\"onLoad\"\n        :offset=\"50\"\n      >\n        <van-cell class=\"total\" style=\"color:#333730;font-weight:bold;\" :title=\"'共'+length+'章'\">\n          <template #default>\n            <div @click=\"sort\" style=\"color:#333730;font-weight:200;\">{{isSort ? '正序' : '倒序'}}</div>\n          </template>\n        </van-cell>\n        <van-cell\n          v-for=\"(item,index) in listData\"\n          :key=\"index\"\n          :title=\"item.title\"\n          @click=\"listClick(index,item)\"\n          :class=\"index == isIndex ? 'active' : ''\"\n          is-link\n        />\n      </van-list>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      show: false,\n      bookId: {},\n      isIndex: 0,\n      popup: [\n        {\n          icon: \"home-o\",\n          text: \"主页\",\n          route: \"Home\"\n        },\n        {\n          icon: \"contact\",\n          text: \"账户\",\n          route: \"Login\"\n        },\n        {\n          icon: \"search\",\n          text: \"搜索\",\n          route: \"Search\"\n        },\n        {\n          icon: \"bookmark-o\",\n          text: \"书架\",\n          route: \"Bookshelf\"\n        },\n        {\n          icon: \"bar-chart-o\",\n          text: \"排行榜\",\n          route: \"Ranking\"\n        }\n      ],\n      listData: [],\n      allListData: [],\n      loadOptions: {\n        //是否处于加载状态，加载过程中不触发load事件\n        isLoading: true,\n        //是否完成加载所有数据\n        isFinished: false,\n        finishedText: \"没有章节可加载了\"\n      },\n      //每次加载20条数据\n      loadCount: 20,\n      isSort: false,\n      length: 0\n    };\n  },\n  created() {\n    this.bookId = this.$route.query;\n    this.getbookChapters();\n  },\n  methods: {\n    //返回\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    onClickRight() {\n      this.show = !this.show;\n    },\n    popupClick(item) {\n      this.$router.push({ name: item.route });\n    },\n    getbookChapters(isSort) {\n      //开启加载提示\n      this.$toast.loading({\n        message: \"加载中...\",\n        forbidClick: true,\n        //延迟自动关闭加载提示，如果该值为0，则不会自动关闭\n        duration: 0\n      });\n      this.axios({\n        method: \"GET\",\n        url: \"https://novel.kele8.cn/book-chapters/\" + this.bookId.id\n      })\n        .then(result => {\n          this.$toast.clear();\n          this.length = result.data.chapters.length;\n          if (Object.keys(result.data).length > 0) {\n            this.allListData = result.data.chapters;\n            this.allListData = this.allListData.sort(this.sortNumber);\n            this.listData = this.allListData.splice(0, this.loadCount);\n            if (this.allListData.length > 0) {\n              this.loadOptions.isLoading = false;\n            } else {\n              this.loadOptions.isLoading = true;\n              this.loadOptions.isFinished = true;\n            }\n            if (this.listData.length == 0) {\n              this.loadOptions.finishedText = \"\";\n            }\n          }\n        })\n        .catch(err => {\n          this.$toast.clear();\n        });\n    },\n    sort() {\n      this.isSort = !this.isSort;\n      this.getbookChapters(this.isSort);\n    },\n    sortNumber(a, b) {\n      if (this.isSort) {\n        return b.order - a.order;\n      } else {\n        return a.order - b.order;\n      }\n    },\n    onLoad() {\n      setTimeout(() => {\n        this.listData.push(...this.allListData.splice(0, this.loadCount));\n        // 数据全部加载完成\n        this.loadOptions.isLoading = false;\n        if (this.allListData.length == 0) {\n          this.loadOptions.isFinished = true;\n        }\n      }, 200);\n    },\n    listClick(index, item) {\n      this.isIndex = index;\n      let ids = this.bookId.id;\n      this.$router.push({\n        name: \"Book\",\n        query: { isSort: this.isSort, index: index, bookId: ids }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.catalog {\n  /deep/ .van-overlay {\n    top: 46.01px;\n  }\n  /deep/ .van-popup--top {\n    top: 46.01px;\n  }\n  /deep/ .bar {\n    z-index: 3000;\n  }\n  .booklist {\n    width: 100%;\n    height: 100%;\n    background-color: #fff;\n    z-index: 1000;\n    .van-sidebar {\n      width: 100%;\n    }\n    .van-cell {\n      border-bottom: 1px solid #ccc;\n      font-size: 14px;\n    }\n    .van-cell.active {\n      font-size: 16px;\n      transition: all 0.5s;\n      color: #ed424b;\n    }\n    .listTitle {\n      color: #ed424b;\n      border-bottom: 1px solid #ed424b;\n    }\n    /deep/ .van-list {\n      height: 100%;\n      overflow-y: auto;\n      z-index: 1000;\n      .van-cell__title {\n        text-align: left;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Catalog.vue?vue&type=template&id=c90a051a&scoped=true&\"\nimport script from \"./Catalog.vue?vue&type=script&lang=js&\"\nexport * from \"./Catalog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Catalog.vue?vue&type=style&index=0&id=c90a051a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c90a051a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=style&index=0&id=c90a051a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=style&index=0&id=c90a051a&lang=less&scoped=true&\""],"sourceRoot":""}