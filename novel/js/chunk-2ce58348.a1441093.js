(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ce58348"],{"0929":function(t,o,i){"use strict";i.r(o);var a=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"classify"},[i("div",[i("van-nav-bar",{staticClass:"bar",attrs:{title:t.id.minor,"left-text":t.id.major,"left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"right",fn:function(){return[i("van-icon",{attrs:{name:t.show?"cross":"ellipsis",size:"18"}})]},proxy:!0}])}),i("van-popup",{style:{height:"171.2px"},attrs:{position:"top"},model:{value:t.show,callback:function(o){t.show=o},expression:"show"}},[i("van-grid",{attrs:{"column-num":3}},t._l(t.popup,(function(o,a){return i("van-grid-item",{key:a,attrs:{icon:o.icon,text:o.text},on:{click:function(i){return t.popupClick(o)}}})})),1)],1)],1),0==t.bookData.length?i("div",[i("van-empty",{attrs:{description:"哎呀，暂时没有你要查找的书本哦！"}})],1):i("van-list",{attrs:{finished:t.loadOptions.isFinished,"finished-text":t.loadOptions.finishedText,offset:50},on:{load:t.onLoad},model:{value:t.loadOptions.isLoading,callback:function(o){t.$set(t.loadOptions,"isLoading",o)},expression:"loadOptions.isLoading"}},t._l(t.bookData,(function(o,a){return i("div",{key:a,staticClass:"classify-item clearfix",on:{click:function(i){return t.goPage(o)}}},[i("div",{staticClass:"classify-img fl"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o.cover,expression:"item.cover"}],staticClass:"auto-img",attrs:{alt:""}})]),i("div",{staticClass:"classify-detail fl"},[i("div",{staticClass:"classify-title one-text"},[t._v(t._s(o.title))]),i("div",{staticClass:"classify-author one-text"},[t._v("作者："+t._s(o.author))]),i("div",{staticClass:"classify-shortIntro one-text"},[t._v("简介："+t._s(o.shortIntro))]),i("div",{staticClass:"classify-lastChapter one-text"},[t._v("更新至："+t._s(o.lastChapter))])])])})),0)],1)},e=[],s=(i("fb6a"),i("a434"),i("b64b"),i("2909")),n=(i("e7e5"),i("d399")),l={data:function(){return{id:{},bookData:[],allBookData:[],loadOptions:{isLoading:!0,isFinished:!1,finishedText:"没有书本可加载了"},loadCount:6,show:!1,val:{},popup:[{icon:"home-o",text:"主页",route:"Home"},{icon:"contact",text:"账户",route:"Login"},{icon:"search",text:"搜索",route:"Search"},{icon:"bookmark-o",text:"书架",route:"Bookshelf"},{icon:"bar-chart-o",text:"排行榜",route:"Ranking"}],moreId:{}}},created:function(){},beforeRouteEnter:function(t,o,i){var a=t.query;console.log("跳转路由前获取路由参数"),n["a"].loading({message:"加载中...",forbidClick:!0,duration:0}),i((function(t){3==Object.keys(a).length?(t.id=a,t.getBookData(),t.$toast.clear()):2==Object.keys(a).length?(t.moreId=a,t.getBookData(),t.$toast.clear()):(t.val=a,t.getBookData(),t.$toast.clear())}))},methods:{onLoad:function(){var t=this;setTimeout((function(){var o;(o=t.bookData).push.apply(o,Object(s["a"])(t.allBookData.splice(0,t.loadCount))),t.loadOptions.isLoading=!1,0==t.allBookData.length&&(t.loadOptions.isFinished=!0)}),200)},getBookData:function(){var t=this,o="";0!=Object.keys(this.id).length?o="https://novel.kele8.cn/category-info?gender="+this.id.sex+"&type=hot&major="+this.id.major+"&minor="+this.id.minor+"&start=0&limit=1000":0!=Object.keys(this.moreId).length?(o="https://novel.kele8.cn/recommend/"+this.moreId.id,this.id.minor="你可能感兴趣的",this.id.major="返回"):(o="https://novel.kele8.cn/search?keyword="+this.val.val,this.id.minor="搜索结果",this.id.major="返回"),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:o}).then((function(o){if(t.$toast.clear(),Object.keys(o.data).length>0){for(var i=0;i<o.data.books.length;i++)o.data.books[i].cover=t.imgKey(o.data.books[i].cover);t.allBookData=o.data.books,t.bookData=t.allBookData.splice(0,t.loadCount),t.allBookData.length>0?t.loadOptions.isLoading=!1:(t.loadOptions.isLoading=!0,t.loadOptions.isFinished=!0),0==t.bookData.length&&(t.loadOptions.finishedText="")}})).catch((function(o){t.$toast.clear()}))},imgKey:function(t){return unescape(t).slice(7)},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){this.show=!this.show},goPage:function(t){var o=t._id;this.$router.push({name:"Detail",query:{id:o}})},popupClick:function(t){this.$router.push({name:t.route})}}},c=l,r=(i("29ca"),i("2877")),d=Object(r["a"])(c,a,e,!1,null,"1c469d4c",null);o["default"]=d.exports},"29ca":function(t,o,i){"use strict";var a=i("4f13"),e=i.n(a);e.a},"4f13":function(t,o,i){}}]);
//# sourceMappingURL=chunk-2ce58348.a1441093.js.map